# üìã –°–ü–†–ê–í–û–ß–ù–ò–ö –ü–†–û–ï–ö–¢–ê - API –±—Ä–æ—Å–∞–Ω–∏—è –º–æ–Ω–µ—Ç–∫–∏

## üóÇÔ∏è –°–¢–†–£–ö–¢–£–†–ê –§–ê–ô–õ–û–í

### –û—Å–Ω–æ–≤–Ω—ã–µ —Ñ–∞–π–ª—ã –ø—Ä–æ–µ–∫—Ç–∞
```
coin-flip-api/
‚îú‚îÄ‚îÄ main.py                    # –ì–ª–∞–≤–Ω—ã–π —Ñ–∞–π–ª FastAPI –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îú‚îÄ‚îÄ templates/
‚îÇ   ‚îî‚îÄ‚îÄ index.html            # HTML –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å —Å –∫–Ω–æ–ø–∫–∞–º–∏ –∏ —Å—Ç–∏–ª—è–º–∏
‚îú‚îÄ‚îÄ requirements.txt          # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ Python (–µ—Å–ª–∏ —Å–æ–∑–¥–∞–≤–∞—Ç—å)
‚îú‚îÄ‚îÄ README.md                 # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –∑–∞–ø—É—Å–∫–∞ —á–µ—Ä–µ–∑ Docker
‚îú‚îÄ‚îÄ Dockerfile               # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
‚îú‚îÄ‚îÄ docker-compose.yml       # –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è –∑–∞–ø—É—Å–∫–∞ —á–µ—Ä–µ–∑ Docker Compose
‚îî‚îÄ‚îÄ –°–ü–†–ê–í–û–ß–ù–ò–ö_–ü–†–û–ï–ö–¢–ê.md    # –≠—Ç–æ—Ç —Ñ–∞–π–ª
```

### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã
```
.cursor/
‚îî‚îÄ‚îÄ mcp.json                 # –ù–∞—Å—Ç—Ä–æ–π–∫–∏ MCP —Å–µ—Ä–≤–µ—Ä–æ–≤ –¥–ª—è Cursor
```

---

## üñ•Ô∏è –°–ï–†–í–ï–†–´ –ò –°–ï–†–í–ò–°–´

### FastAPI –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
- **–ê–¥—Ä–µ—Å:** `http://localhost:8000`
- **–ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞:** `http://localhost:8000/` (HTML –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å)
- **API –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:** `http://localhost:8000/docs` (Swagger UI)
- **–ü—Ä–æ—Ü–µ—Å—Å:** `python main.py`

### MCP —Å–µ—Ä–≤–µ—Ä—ã (–≤ .cursor/mcp.json)
- **mcp-server-docker** - –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞–º–∏
- **dbhub** - –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å PostgreSQL —á–µ—Ä–µ–∑ MCP

---

## üê≥ DOCKER –ö–û–ù–¢–ï–ô–ù–ï–†–´

### –¢–µ–∫—É—â–∏–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã
- **local-postgres** - –ª–æ–∫–∞–ª—å–Ω–∞—è –±–∞–∑–∞ PostgreSQL
  - –ü–æ—Ä—Ç: 5432
  - –ë–∞–∑–∞: coinflip
  - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: postgres
  - –ü–∞—Ä–æ–ª—å: postgres

### Docker –æ–±—Ä–∞–∑—ã
- **postgres:latest** - –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
- **bytebase/dbhub:latest** - –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –±–∞–∑–∞–º–∏
- **coin-flip-api** - –≤–∞—à–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ (–µ—Å–ª–∏ —Å–æ–±–∏—Ä–∞—Ç—å)

---

## üóÑÔ∏è –ë–ê–ó–´ –î–ê–ù–ù–´–•

### –£–¥–∞–ª—ë–Ω–Ω–∞—è –±–∞–∑–∞ (alwaysdata.net) - –û–°–ù–û–í–ù–ê–Ø
- **–•–æ—Å—Ç:** postgresql-julika.alwaysdata.net
- **–ü–æ—Ä—Ç:** 5432
- **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö:** julika_test
- **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å:** julika_admin
- **–ü–∞—Ä–æ–ª—å:** 3198692z
- **–°—Ç—Ä–æ–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è:** 
  ```
  postgres://julika_admin:3198692z@postgresql-julika.alwaysdata.net:5432/julika_test?sslmode=disable
  ```
- **–í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å:** https://phppgadmin.alwaysdata.com/phppgadmin/

### –õ–æ–∫–∞–ª—å–Ω–∞—è –±–∞–∑–∞ (Docker) - –î–õ–Ø –¢–ï–°–¢–û–í
- **–•–æ—Å—Ç:** localhost
- **–ü–æ—Ä—Ç:** 5432
- **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö:** coinflip
- **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å:** postgres
- **–ü–∞—Ä–æ–ª—å:** postgres
- **–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä:** local-postgres

---

## üìä –¢–ê–ë–õ–ò–¶–´

### coin_flip_stats (–≤ julika_test)
```sql
CREATE TABLE coin_flip_stats (
    id SERIAL PRIMARY KEY,                    -- –£–Ω–∏–∫–∞–ª—å–Ω—ã–π ID –∑–∞–ø–∏—Å–∏
    –¥–∞—Ç–∞_–≤—Ä–µ–º—è TIMESTAMP DEFAULT CURRENT_TIMESTAMP,  -- –í—Ä–µ–º—è –±—Ä–æ—Å–∫–∞
    —Ä–µ–∑—É–ª—å—Ç–∞—Ç VARCHAR(10) NOT NULL,          -- "–æ—Ä—ë–ª" –∏–ª–∏ "—Ä–µ—à–∫–∞"
    –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ INTEGER NOT NULL              -- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –±—Ä–æ—Å–∫–æ–≤ (–æ–±—ã—á–Ω–æ 1)
);
```

---

## üöÄ –ö–û–ú–ê–ù–î–´ –î–õ–Ø –ó–ê–ü–£–°–ö–ê

### –ó–∞–ø—É—Å–∫ FastAPI –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
```bash
cd coin-flip-api
python main.py
```

### –ó–∞–ø—É—Å–∫ –ª–æ–∫–∞–ª—å–Ω–æ–π PostgreSQL
```bash
docker run --name local-postgres -e POSTGRES_PASSWORD=postgres -e POSTGRES_USER=postgres -e POSTGRES_DB=coinflip -p 5432:5432 -d postgres
```

### –ó–∞–ø—É—Å–∫ MCP dbhub
```bash
$env:DSN="postgres://julika_admin:3198692z@postgresql-julika.alwaysdata.net:5432/julika_test?sslmode=disable"
npx @bytebase/dbhub
```

---

## üîß API –≠–ù–î–ü–û–ò–ù–¢–´

### GET /
- **–û–ø–∏—Å–∞–Ω–∏–µ:** –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ —Å HTML –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–º
- **–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:** HTML —Å—Ç—Ä–∞–Ω–∏—Ü—É —Å –∫–Ω–æ–ø–∫–∞–º–∏

### GET /flip
- **–û–ø–∏—Å–∞–Ω–∏–µ:** –ë—Ä–æ—Å–∏—Ç—å –º–æ–Ω–µ—Ç–∫—É –æ–¥–∏–Ω —Ä–∞–∑
- **–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:** JSON —Å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–º
- **–ó–∞–ø–∏—Å—ã–≤–∞–µ—Ç –≤ –ë–î:** –î–∞

### POST /flip
- **–û–ø–∏—Å–∞–Ω–∏–µ:** –ë—Ä–æ—Å–∏—Ç—å –º–æ–Ω–µ—Ç–∫—É –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ä–∞–∑
- **–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:** `{"–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ": —á–∏—Å–ª–æ}`
- **–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:** JSON —Å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏ –∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–æ–π
- **–ó–∞–ø–∏—Å—ã–≤–∞–µ—Ç –≤ –ë–î:** –î–∞ (–∫–∞–∂–¥—ã–π –±—Ä–æ—Å–æ–∫ –æ—Ç–¥–µ–ª—å–Ω–æ)

### GET /stats
- **–û–ø–∏—Å–∞–Ω–∏–µ:** –û–±—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
- **–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:** JSON —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—è—Ö

### GET /docs
- **–û–ø–∏—Å–∞–Ω–∏–µ:** Swagger UI –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- **–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:** –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—É—é –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é API

---

## üîë –í–ê–ñ–ù–´–ï –ü–ï–†–ï–ú–ï–ù–ù–´–ï

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
- **DSN** - —Å—Ç—Ä–æ–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ PostgreSQL
- **READONLY** - —Ä–µ–∂–∏–º —Ç–æ–ª—å–∫–æ —á—Ç–µ–Ω–∏—è –¥–ª—è dbhub ("false" –¥–ª—è –∑–∞–ø–∏—Å–∏)
- **TRANSPORT** - —Ç–∏–ø —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–∞ –¥–ª—è MCP ("stdio")

---

## üìù –ü–†–ò –î–û–ë–ê–í–õ–ï–ù–ò–ò –ù–û–í–´–• –§–£–ù–ö–¶–ò–ô

### –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ —É–∫–∞–∑—ã–≤–∞–π—Ç–µ –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ:
1. **–≠—Ç–æ—Ç —Ñ–∞–π–ª:** `coin-flip-api/–°–ü–†–ê–í–û–ß–ù–ò–ö_–ü–†–û–ï–ö–¢–ê.md`
2. **–û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–¥:** `coin-flip-api/main.py`
3. **HTML –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å:** `coin-flip-api/templates/index.html`
4. **MCP –∫–æ–Ω—Ñ–∏–≥:** `.cursor/mcp.json`

### –ï—Å–ª–∏ —Ä–∞–±–æ—Ç–∞–µ—Ç–µ —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö:
- **–¢–∞–±–ª–∏—Ü–∞:** coin_flip_stats
- **–ë–∞–∑–∞:** julika_test –Ω–∞ alwaysdata.net
- **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å:** julika_admin

### –ï—Å–ª–∏ —Ä–∞–±–æ—Ç–∞–µ—Ç–µ —Å Docker:
- **–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä PostgreSQL:** local-postgres
- **–û–±—Ä–∞–∑ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è:** coin-flip-api

---

## ‚ö†Ô∏è –í–ê–ñ–ù–´–ï –ó–ê–ú–ï–ß–ê–ù–ò–Ø

1. **–û—Å–Ω–æ–≤–Ω–∞—è –±–∞–∑–∞** - –Ω–∞ alwaysdata.net (—Ç–∞–º —Ö—Ä–∞–Ω—è—Ç—Å—è —Ä–µ–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ)
2. **–õ–æ–∫–∞–ª—å–Ω–∞—è –±–∞–∑–∞** - —Ç–æ–ª—å–∫–æ –¥–ª—è —Ç–µ—Å—Ç–æ–≤
3. **FastAPI –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –∑–∞–ø—É—â–µ–Ω** –¥–ª—è —Ä–∞–±–æ—Ç—ã HTML –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
4. **MCP dbhub** –Ω—É–∂–µ–Ω –¥–ª—è —Ä–∞–±–æ—Ç—ã –≤ Cursor —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö
5. **–í—Å–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –±—Ä–æ—Å–∫–æ–≤** –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ —Ç–∞–±–ª–∏—Ü—É coin_flip_stats

---

*–û–±–Ω–æ–≤–ª–µ–Ω–æ: 21.07.2025*
*–í–µ—Ä—Å–∏—è –ø—Ä–æ–µ–∫—Ç–∞: 1.0.0* 